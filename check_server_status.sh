#!/bin/bash
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ psycholog.windexs.ru"
echo "================================================"

echo ""
echo "1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:"
if curl -s https://psycholog.windexs.ru/ | grep -q "@vite/client"; then
    echo "‚ùå –ü–†–û–ë–õ–ï–ú–ê: –í—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç Vite dev —Å–µ—Ä–≤–µ—Ä!"
    echo "   –ù—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å–±–æ—Ä–∫—É –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä"
else
    echo "‚úÖ OK: –ü—Ä–æ–¥–∞–∫—à–µ–Ω —Å–±–æ—Ä–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞"
fi

echo ""
echo "2. –ü—Ä–æ–≤–µ—Ä–∫–∞ API —Å–µ—Ä–≤–µ—Ä–∞:"
API_RESP=$(curl -s https://psycholog.windexs.ru/api/test)
if echo "$API_RESP" | grep -q "Proxy server is working"; then
    echo "‚úÖ OK: Express API —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç"
elif echo "$API_RESP" | grep -q "@vite/client"; then
    echo "‚ùå –ü–†–û–ë–õ–ï–ú–ê: API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML –æ—Ç Vite"
    echo "   –ù—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å Express —Å–µ—Ä–≤–µ—Ä –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å nginx –ø—Ä–æ–∫—Å–∏"
else
    echo "‚ùå –ü–†–û–ë–õ–ï–ú–ê: API —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"
    echo "   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ Express —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 1033"
fi

echo ""
echo "3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:"
if curl -s https://psycholog.windexs.ru/ | grep -q "mode.*production"; then
    echo "‚úÖ OK: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production —Ä–µ–∂–∏–º–µ"
else
    echo "‚ö†Ô∏è  –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ development —Ä–µ–∂–∏–º–µ"
fi

echo ""
echo "üìã –†–ï–ó–£–õ–¨–¢–ê–¢–´ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò"
echo "========================"
echo "–ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã - —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤—ã—à–µ!"
EOF && chmod +x check_server_status.sh